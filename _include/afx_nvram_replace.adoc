= Schritt 1: Schalten Sie den beeinträchtigten Regler aus
:allow-uri-read: 


Das NVRAM-Modul besteht aus der NVRAM12-Hardware und vor Ort austauschbaren DIMMs. Ein ausgefallenes NVRAM-Modul oder die DIMMs im NVRAM-Modul können Sie ersetzen.

.Bevor Sie beginnen
* Stellen Sie sicher, dass Sie das Ersatzteil zur Verfügung haben. Sie müssen die ausgefallene Komponente durch eine von NetApp erhaltene Ersatzkomponente ersetzen.
* Stellen Sie sicher, dass alle anderen Komponenten des Speichersystems ordnungsgemäß funktionieren. Wenn nicht, wenden Sie sich an https://support.netapp.com["NetApp Support"].




== Schritt 1: Schalten Sie den beeinträchtigten Regler aus

Schalten Sie den außer Betrieb genommenen Controller aus oder übernehmen Sie ihn.

Um den beeinträchtigten Controller herunterzufahren, müssen Sie den Status des Controllers ermitteln und gegebenenfalls eine Speicher-Failover-Übernahme des Controllers durchführen, damit der fehlerfreie Controller weiterhin Daten aus dem beeinträchtigten Controller-Speicher bereitstellt.

.Über diese Aufgabe
* Wenn Sie einen Cluster mit mehr als vier Knoten haben, muss dieser im Quorum sein.  Um Clusterinformationen zu Ihren Knoten anzuzeigen, verwenden Sie die `cluster show` Befehl.  Weitere Informationen zum `cluster show` Befehl, siehelink:https://docs.netapp.com/us-en/ontap/system-admin/display-nodes-cluster-task.html["Anzeigen von Details auf Knotenebene in einem ONTAP Cluster"^] .
* Wenn der Cluster nicht im Quorum ist oder wenn der Zustand oder die Berechtigung eines Controllers (mit Ausnahme des beeinträchtigten Controllers) als falsch angezeigt wird, müssen Sie das Problem beheben, bevor Sie den beeinträchtigten Controller herunterfahren. Sehen link:https://docs.netapp.com/us-en/ontap/system-admin/synchronize-node-cluster-task.html?q=Quorum["Synchronisieren eines Node mit dem Cluster"^] .


.Schritte
. Wenn AutoSupport aktiviert ist, unterdrücken Sie die automatische Erstellung eines Cases durch Aufrufen einer AutoSupport Meldung:
+
`system node autosupport invoke -node * -type all -message MAINT=<# of hours>h`

+
Die folgende AutoSupport Meldung unterdrückt die automatische Erstellung von Cases für zwei Stunden:

+
`cluster1:> system node autosupport invoke -node * -type all -message MAINT=2h`

. Deaktivieren Sie die automatische Rückgabe von der Konsole des beeinträchtigten Controllers:
+
`storage failover modify -node impaired-node -auto-giveback-of false`

+

NOTE: Wenn Sie _Möchten Sie die automatische Rückgabe deaktivieren?_ sehen, geben Sie ein `y` .

+
.. Wenn Sie ONTAP Version 9.17.1 ausführen und der beeinträchtigte Controller nicht hochgefahren werden kann oder bereits übernommen wurde, müssen Sie die HA-Verbindung vom fehlerfreien Controller trennen, bevor Sie den beeinträchtigten Controller hochfahren.  Dadurch wird verhindert, dass der beeinträchtigte Controller eine automatische Rückgabe durchführt.
+
`system ha interconnect link off -node healthy-node -link 0`

+
`system ha interconnect link off -node healthy-node -link 1`

+

NOTE: Wenn Sie nicht ONTAP Version 9.17.1 ausführen, überspringen Sie den obigen Schritt und fahren Sie mit Schritt 3 fort.



. Nehmen Sie den beeinträchtigten Controller zur LOADER-Eingabeaufforderung:
+
[cols="1,2"]
|===
| Wenn der eingeschränkte Controller angezeigt wird... | Dann... 


 a| 
Die LOADER-Eingabeaufforderung
 a| 
Fahren Sie mit dem nächsten Schritt fort.



 a| 
Eingabeaufforderung für das System oder Passwort
 a| 
Übernehmen oder stoppen Sie den beeinträchtigten Controller vom fehlerfreien Controller:
`storage failover takeover -ofnode _impaired_node_name_ -halt _true_`

Der Parameter _-halt true_ bringt den beeinträchtigten Knoten zur LOADER-Eingabeaufforderung.

|===




== Schritt 2: Ersetzen Sie das NVRAM-Modul oder das NVRAM-DIMM

Ersetzen Sie das NVRAM-Modul oder die NVRAM-DIMMs mit der entsprechenden Option.

[role="tabbed-block"]
====
.Option 1: Ersetzen Sie das NVRAM-Modul
--
Um das NVRAM-Modul auszutauschen, suchen Sie es in Steckplatz 4/5 im Gehäuse, und befolgen Sie die entsprechenden Schritte.

. Wenn Sie nicht bereits geerdet sind, sollten Sie sich richtig Erden.
. Ziehen Sie die Stromversorgungskabel der Netzteile vom Controller ab.
. Drehen Sie das Kabelführungs-Fach nach unten, indem Sie die Stifte an den Enden des Fachs vorsichtig herausziehen und das Fach nach unten drehen.
. Entfernen Sie das außer Betrieb genommene NVRAM-Modul aus dem Gehäuse:
+
.. Drücken Sie die Verriegelungsnocken-Taste.
+
Die Nockentaste bewegt sich vom Gehäuse weg.

.. Drehen Sie die Nockenverriegelung so weit wie möglich nach unten.
.. Entfernen Sie das außer Betrieb genommene NVRAM-Modul aus dem Gehäuse, indem Sie den Finger in die Öffnung des Nockenhebels stecken und das Modul aus dem Gehäuse ziehen.
+
image::../media/drw_a1k_nvram12_remove_replace_ieops-1380.svg[Entfernen Sie das NVRAM12-Modul und die DIMMs]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["Legende Nummer 1"]
| Nockenverriegelungstaste 


 a| 
image:../media/icon_round_2.png["Legende Nummer 2"]
 a| 
DIMM-Verriegelungslaschen

|===


. Stellen Sie das NVRAM-Modul auf eine stabile Oberfläche.
. Entfernen Sie nacheinander die DIMMs aus dem außer Betrieb genommenen NVRAM-Modul, und setzen Sie sie in das Ersatz-NVRAM-Modul ein.
. Installieren Sie das neue NVRAM-Modul im Gehäuse:
+
.. Richten Sie das Modul an den Kanten der Gehäuseöffnung in Steckplatz 4/5 aus.
.. Schieben Sie das Modul vorsichtig bis zum Anschlag in den Steckplatz, und drehen Sie dann die Nockenverriegelung ganz nach oben, um das Modul zu verriegeln.


. Drehen Sie das Kabelführungs-Fach bis in die geschlossene Position.


--
.Option 2: Ersetzen Sie das NVRAM-DIMM
--
Um NVRAM-DIMMs im NVRAM-Modul auszutauschen, müssen Sie das NVRAM-Modul entfernen und dann das Ziel-DIMM ersetzen.

. Wenn Sie nicht bereits geerdet sind, sollten Sie sich richtig Erden.
. Ziehen Sie die Stromversorgungskabel von den Netzteilen ab.
. Drehen Sie das Kabelführungs-Fach nach unten, indem Sie die Stifte an den Enden des Fachs vorsichtig herausziehen und das Fach nach unten drehen.
. Entfernen Sie das NVRAM-Zielmodul aus dem Gehäuse.
+
image::../media/drw_a1k_nvram12_remove_replace_ieops-1380.svg[Entfernen Sie das NVRAM 12-Modul und die DIMMs]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["Legende Nummer 1"]
| Nockenverriegelungstaste 


 a| 
image:../media/icon_round_2.png["Legende Nummer 2"]
 a| 
DIMM-Verriegelungslaschen

|===
. Stellen Sie das NVRAM-Modul auf eine stabile Oberfläche.
. Machen Sie das DIMM-Modul ausfindig, das im NVRAM-Modul ersetzt werden soll.
+

NOTE: Verwenden Sie das FRU-Kartenetikett auf der Seite des NVRAM-Moduls, um die Position der DIMM-Steckplätze 1 und 2 zu bestimmen.

. Entfernen Sie das DIMM-Modul, indem Sie die DIMM-Sperrklinken nach unten drücken und das DIMM aus dem Sockel heben.
. Installieren Sie das ErsatzDIMM, indem Sie das DIMM-Modul am Sockel ausrichten und das DIMM vorsichtig in den Sockel schieben, bis die Verriegelungslaschen einrasten.
. Installieren Sie das NVRAM-Modul im Gehäuse:
+
.. Schieben Sie das Modul vorsichtig in den Steckplatz, bis die Nockenverriegelung mit dem E/A-Nockenbolzen einrastet, und drehen Sie dann die Nockenverriegelung bis zum Anschlag nach oben, um das Modul zu verriegeln.


. Drehen Sie das Kabelführungs-Fach bis in die geschlossene Position.


--
====


== Schritt 3: Starten Sie den Controller neu

Nachdem Sie die FRU ersetzt haben, müssen Sie das Controller-Modul neu booten.

. Stecken Sie die Stromkabel wieder in das Netzteil.
+
Das System wird neu gebootet, normalerweise bis zur LOADER-Eingabeaufforderung.

. Eingeben `bye` an der LOADER-Eingabeaufforderung.




== Schritt 4: Kompletter NVRAM -Austausch

Führen Sie die folgenden Schritte aus, um den NVRAM Austausch abzuschließen.

.Schritte
. Starten Sie an der LOADER-Eingabeaufforderung auf dem Controller den Controller, und geben Sie bei der Eingabeaufforderung „_y_“ ein, um die System-ID aufgrund einer nicht übereinstimmenden System-ID zu überschreiben.
+
Nachfolgend sehen Sie ein Beispiel für die Eingabeaufforderung zum Überschreiben der System-ID:

+
[listing]
----
WARNING: System ID mismatch. This usually occurs when replacing a boot device or NVRAM cards!
Override system ID? {y|n}
----
. Überprüfen Sie vom fehlerfreien Controller aus, ob die neue Partnersystem-ID automatisch zugewiesen wurde:
`_storage failover show_`
+
In der Befehlsausgabe sollte eine Meldung mit dem aktuellen Status des Speicheraustauschs angezeigt werden.  Im folgenden Beispiel wurde Knoten2 ersetzt und zeigt den aktuellen Status als „In Übernahme“ an.

+
[listing]
----
node1:> storage failover show
                                    Takeover
Node              Partner           Possible     State Description
------------      ------------      --------     -------------------------------------
node1             node2             false        In takeover
node2             node1             -            Waiting for giveback
----
. Geben Sie den Controller zurück:
+
.. Geben Sie vom fehlerfreien Controller den Speicher des ersetzten Controllers zurück: `_storage failover giveback -ofnode replacement_node_name_`
+
Der Controller nimmt seinen Storage wieder auf und schließt den Bootvorgang ab.

+

NOTE: Wenn das Rückübertragung ein Vetorecht ist, können Sie erwägen, das Vetos außer Kraft zu setzen.

+
Weitere Informationen finden Sie im https://docs.netapp.com/us-en/ontap/high-availability/ha_manual_giveback.html#if-giveback-is-interrupted["Manuelle Giveback-Befehle"^] Thema, um das Veto zu überschreiben.

.. Nach Abschluss der Rückgabe muss sichergestellt werden, dass das HA-Paar in einem ordnungsgemäßen Zustand ist und dass ein Takeover möglich ist: _Storage Failover show_
+
Die Ausgabe von der `storage failover show` Befehl sollte nicht die in der Partnernachricht geänderte System-ID enthalten.



. Überprüfen Sie, ob für jeden Controller die erwarteten Volumes vorhanden sind:
+
`vol show -node node-name`

. Drücken Sie <enter>, wenn die Konsolenmeldungen angehalten werden.
+
** Wenn die _Anmeldeaufforderung_ angezeigt wird, fahren Sie mit dem nächsten Schritt fort.
** Wenn keine Anmeldeaufforderung angezeigt wird, melden Sie sich beim Partnerknoten an.


. Warten Sie 5 Minuten, nachdem der Giveback-Bericht abgeschlossen ist, und prüfen Sie den Failover-Status und den Giveback-Status:
+
`storage failover show`Und `storage failover show-giveback`

+

NOTE: Der folgende Befehl ist nur auf der Berechtigungsebene „Diagnosemodus“ verfügbar.

. Wenn die HA-Interconnect-Links deaktiviert wurden, stellen Sie sie wieder her:
+
`system ha interconnect link on -node healthy-node -link 0`

+
`system ha interconnect link on -node healthy-node -link 1`

. Stellen Sie den funktionsbeeinträchtigten Controller wieder in den Normalbetrieb ein, indem Sie den Speicher zurückgeben:
+
`storage failover giveback -ofnode _impaired_node_name_`

. Wenn die automatische Rückübertragung deaktiviert wurde, aktivieren Sie sie erneut:
+
`storage failover modify -node local -auto-giveback-of true`

. Wenn AutoSupport aktiviert ist, können Sie die automatische Fallerstellung wiederherstellen/zurücknehmen:
+
`system node autosupport invoke -node * -type all -message MAINT=END`





== Schritt 5: Senden Sie das fehlgeschlagene Teil an NetApp zurück

Senden Sie das fehlerhafte Teil wie in den dem Kit beiliegenden RMA-Anweisungen beschrieben an NetApp zurück.  https://mysupport.netapp.com/site/info/rma["Rückgabe und Austausch von Teilen"]Weitere Informationen finden Sie auf der Seite.
